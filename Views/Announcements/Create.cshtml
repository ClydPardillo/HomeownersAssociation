@model HomeownersAssociation.Models.ViewModels.AnnouncementViewModel

@{
    ViewData["Title"] = "Create New Announcement";
}

<div class="container py-5 lora-body">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="oswald-heading">@ViewData["Title"]</h2>
        <a asp-action="Index" class="btn btn-secondary" data-mdb-ripple-init>
            <i class="fas fa-arrow-left me-2"></i> Back to Announcements
        </a>
    </div>

    <div class="row">
        <div class="col-lg-8 mb-4 mb-lg-0">
            <div class="card rounded-6 shadow-2-strong">
                <div class="card-header bg-primary text-white oswald-heading">
                    <h5 class="mb-0"><i class="fas fa-bullhorn me-2"></i>Announcement Details</h5>
                </div>
                <div class="card-body p-4">
                    <form asp-action="Create" enctype="multipart/form-data">
                        <div asp-validation-summary="ModelOnly" class="alert alert-danger p-2" data-mdb-alert-init></div>

                        <!-- Title -->
                        <div class="form-outline mb-4" data-mdb-input-init>
                            <input asp-for="Title" id="title" class="form-control border" />
                            <label asp-for="Title" class="form-label" for="title"></label>
                        </div>
                        <span asp-validation-for="Title" class="text-danger d-block mb-3"></span>

                        <!-- Content -->
                        <div class="form-outline mb-4" data-mdb-input-init>
                            <textarea asp-for="Content" id="content" class="form-control border" rows="10"></textarea>
                            <label asp-for="Content" class="form-label" for="content"></label>
                        </div>
                        <span asp-validation-for="Content" class="text-danger d-block mb-3"></span>
                        <small class="form-text text-muted mb-3 d-block">You can use basic HTML formatting in the content (e.g., &lt;b&gt;, &lt;i&gt;, &lt;ul&gt;, &lt;li&gt;, &lt;a&gt;).</small>

                        <div class="row">
                            <!-- Priority -->
                            <div class="col-md-6 mb-4">
                                <label asp-for="Priority" class="form-label">Priority</label>
                                <select asp-for="Priority" class="form-select border" data-mdb-select-init asp-items="Html.GetEnumSelectList<HomeownersAssociation.Models.AnnouncementPriority>()"></select>
                                <span asp-validation-for="Priority" class="text-danger d-block mt-1"></span>
                            </div>

                            <!-- Expiry Date -->
                            <div class="col-md-6 mb-4">
                                <div class="form-outline datepicker" data-mdb-datepicker-init data-mdb-input-init>
                                    <input asp-for="ExpiryDate" type="text" id="expiryDate" class="form-control border" />
                                    <label asp-for="ExpiryDate" class="form-label" for="expiryDate">Expiry Date (Optional)</label>
                                </div>
                                <span asp-validation-for="ExpiryDate" class="text-danger d-block mt-1"></span>
                                <small class="form-text text-muted mt-1 d-block">Leave blank if the announcement doesn't expire.</small>
                            </div>
                        </div>

                        <!-- Attachment -->
                        <div class="mb-4">
                            <label asp-for="Attachment" class="form-label">Attachment (Optional)</label>
                            <input asp-for="Attachment" class="form-control border" type="file" id="attachment" />
                            <span asp-validation-for="Attachment" class="text-danger d-block mt-1"></span>
                            <small class="form-text text-muted mt-1 d-block">Max file size: 5MB. Allowed types: PDF, DOC, DOCX, JPG, PNG.</small> 
                        </div>

                        <!-- IsActive -->
                        <div class="form-check mb-3">
                            <input asp-for="IsActive" class="form-check-input" type="checkbox" id="isActiveCheck" checked />
                            <label class="form-check-label" asp-for="IsActive" for="isActiveCheck"></label>
                            <span asp-validation-for="IsActive" class="text-danger"></span>
                        </div>

                        <!-- IsPublic -->
                        <div class="form-check mb-4">
                            <input asp-for="IsPublic" class="form-check-input" type="checkbox" id="isPublicCheck" />
                            <label class="form-check-label" asp-for="IsPublic" for="isPublicCheck"></label>
                            <span asp-validation-for="IsPublic" class="text-danger"></span>
                            <div class="form-text text-muted">If checked, this announcement will be visible to non-residents and the public.</div>
                        </div>

                        <hr class="my-4"/>

                        <div class="d-flex justify-content-end">
                            <button type="submit" class="btn btn-primary btn-lg" data-mdb-ripple-init>
                                <i class="fas fa-save me-2"></i> Create Announcement
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card rounded-6 shadow-1-strong">
                <div class="card-header bg-light oswald-heading">
                    <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Tips & Guidelines</h5>
                </div>
                <div class="card-body p-4">
                    <h6 class="fw-bold">Priority Levels:</h6>
                    <ul class="list-unstyled mb-4">
                        <li><span class="badge badge-danger me-1">U</span> <strong>Urgent:</strong> Critical, immediate attention.</li>
                        <li><span class="badge badge-warning me-1">H</span> <strong>High:</strong> Important updates.</li>
                        <li><span class="badge badge-primary me-1">N</span> <strong>Normal:</strong> Regular announcements.</li>
                        <li><span class="badge badge-info me-1">L</span> <strong>Low:</strong> General information.</li>
                    </ul>

                    <h6 class="fw-bold">Content Formatting:</h6>
                    <p class="small text-muted">Use basic HTML for rich text:</p>
                    <ul class="list-unstyled small">
                        <li><code>&lt;b&gt;Bold&lt;/b&gt;</code> or <code>&lt;strong&gt;Strong&lt;/strong&gt;</code></li>
                        <li><code>&lt;i&gt;Italic&lt;/i&gt;</code> or <code>&lt;em&gt;Emphasis&lt;/em&gt;</code></li>
                        <li><code>&lt;u&gt;Underline&lt;/u&gt;</code></li>
                        <li><code>&lt;ul&gt;&lt;li&gt;List Item&lt;/li&gt;&lt;/ul&gt;</code> (Unordered List)</li>
                        <li><code>&lt;ol&gt;&lt;li&gt;List Item&lt;/li&gt;&lt;/ol&gt;</code> (Ordered List)</li>
                        <li><code>&lt;a href="URL"&gt;Link Text&lt;/a&gt;</code></li>
                        <li><code>&lt;br&gt;</code> for line breaks.</li>
                    </ul>
                    
                    <h6 class="fw-bold mt-4">Attachments:</h6>
                    <p class="small text-muted">Consider file size and relevance. PDF is preferred for documents.</p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize MDB datepicker
            document.querySelectorAll('.datepicker').forEach((datepicker) => {
                new mdb.Datepicker(datepicker);
            });

            // Initialize MDB select
            document.querySelectorAll('[data-mdb-select-init]').forEach((select) => {
                new mdb.Select(select);
            });
        });
    </script>
}